<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Utilisateur - Système de Ticketing</title>
    <link rel="stylesheet" href="/css/user.css">
</head>

<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">AT</div>
                    <span>Asten Tickets</span>
                </div>
                <div class="user-profile" style="display: flex; align-items: center; gap: 16px;">
                    <span>Bienvenue, Utilisateur</span>
                    <div class="user-avatar">U</div>
                </div>


                <button id="logout-btn" class="btn btn-logout">Déconnexion</button>

            </div>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <div class="dashboard-grid">
                <!-- Soumission d'un Ticket -->
                <div class="card animate-fade-in">
                    <h2 class="card-title">Soumission d'un Ticket</h2>
                    <div class="success-message" id="successMessage">
                        ✅ Ticket soumis avec succès !
                    </div>
                    <form id="ticketForm">
                        <div class="form-group">
                            <label class="form-label">Titre du Ticket</label>
                            <input type="text" class="form-input" placeholder="Décrivez brièvement votre demande"
                                required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Description</label>
                            <textarea class="form-textarea" placeholder="Décrivez votre problème en détail..."
                                required></textarea>
                        </div>
                        <div class="btn-group">
                            <button type="button" class="btn btn-secondary" onclick="cancelTicket()">Annuler</button>
                            <button type="submit" class="btn btn-primary">
                                <span class="btn-text">Soumettre</span>
                                <div class="loading" id="submitLoading" style="display: none;"></div>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Catégorie Prédite -->
                <div class="card animate-fade-in">
                    <h2 class="card-title">Catégorie Prédite</h2>
                    <div id="predictedCategory" class="prediction-placeholder">
                        Soumettez un ticket pour voir la catégorie prédite
                    </div>
                </div>
            </div>

            <!-- Catégorie Modifiée -->
            <div class="card full-width-card animate-fade-in">
                <h2 class="card-title">Modification de Catégorie</h2>
                <div id="modifySection" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Nouvelle Catégorie</label>
                        <select class="form-select" id="newCategory">
                            <option value="">Sélectionner une catégorie</option>
                            <option value="Support Technique">Support Technique</option>
                            <option value="Assistance Générale">Assistance Générale</option>
                            <option value="Demande de Fonctionnalité">Demande de Fonctionnalité</option>
                            <option value="Question sur l'Utilisation">Question sur l'Utilisation</option>
                            <option value="Problème d'Accès / Connexion">Problème d'Accès / Connexion</option>
                            <option value="Demande de Remboursement">Demande de Remboursement</option>
                            <option value="Signalement de Bug">Signalement de Bug</option>
                            <option value="Autre">Autre</option>
                        </select>
                    </div>
                    <div class="btn-group">
                        <button type="button" class="btn btn-secondary" onclick="cancelModification()">Annuler</button>
                        <button type="button" class="btn btn-primary" onclick="validateModification()">Valider</button>
                    </div>
                </div>
                <div id="noModifyMessage" class="modify-placeholder">
                    Aucune catégorie à modifier pour le moment
                </div>
            </div>

            <!-- Historique des Tickets -->
            <div class="card full-width-card animate-fade-in tickets-history">
                <h2 class="card-title">Historique des Tickets</h2>

                <!-- Filtres -->
                <div class="filters-section">
                    <div class="filter-item" onclick="filterByDate()">
                        <div class="filter-icon"></div>
                        <span>Filtrer par Date</span>
                    </div>
                    <div class="filter-item" onclick="filterByStatus()">
                        <div class="filter-icon"></div>
                        <span>Filtrer par Statut</span>
                    </div>
                    <div class="filter-item" onclick="filterByCategory()">
                        <div class="filter-icon"></div>
                        <span>Filtrer par Catégorie</span>
                    </div>
                </div>

                <div id="ticketsContainer">
                    <!-- les tickets sont affichés ici -->
                </div>
            </div>
        </div>
    </div>

    
    <script type="module" src="js/auth-session.js"></script>
    <script type="module" src="js/user.js"></script>


</body>

</html>