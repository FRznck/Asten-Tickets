<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asten Ticket Manager - Connexion</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
   <link rel="stylesheet" href="/css/auth.css">
</head>
<body>
    <div class="bg-animation">
        <div class="floating-shape shape1"></div>
        <div class="floating-shape shape2"></div>
        <div class="floating-shape shape3"></div>
    </div>

    <div class="login-container">
        <div class="login-left">
            <i class="fas fa-ticket-alt brand-logo"></i>
            <h1 class="brand-title">Asten Ticket Manager</h1>
            <p class="brand-subtitle">
                Système intelligent de catégorisation automatique des tickets avec IA et NLP.
            </p>
        </div>

        <div class="login-right">
            <div class="login-header">
                <h2 class="login-title">Connexion</h2>
                <p class="login-description">Accédez à votre tableau de bord</p>
            </div>

            <div class="error-message" id="errorMessage">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="errorText"></span>
            </div>

            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label class="form-label" for="email">Email</label>
                    <div style="position: relative;">
                        <input 
                            type="email" 
                            id="email" 
                            class="form-input" 
                            placeholder="votre.email@asten.com"
                            required
                        >
                        <i class="fas fa-envelope form-icon"></i>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="password">Mot de passe</label>
                    <div style="position: relative;">
                        <input 
                            type="password" 
                            id="password" 
                            class="form-input" 
                            placeholder="••••••••"
                            required
                        >
                        <i class="fas fa-lock form-icon"></i>
                        <button type="button" class="password-toggle" id="passwordToggle">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="form-options">
                    <div class="checkbox-group">
                        <input type="checkbox" id="remember" class="checkbox">
                        <label for="remember">Se souvenir de moi</label>
                    </div>
                    <a href="#" class="forgot-password">Mot de passe oublié ?</a>
                </div>

                <button type="submit" class="login-button" id="loginButton">
                    <span class="button-text">Se connecter</span>
                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        <span>Connexion...</span>
                    </div>
                </button>
            </form>

            <div class="divider">
                <span>ou</span>
            </div>

            <button type="button" class="demo-access" id="demoButton">
                <i class="fas fa-play-circle"></i>
                Accès démonstration
            </button>
        </div>
    </div>

    <script>
        // Gestion de l'affichage/masquage du mot de passe
        document.getElementById('passwordToggle').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const icon = this.querySelector('i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        });

        // Fonction pour afficher les erreurs
        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            const errorText = document.getElementById('errorText');
            errorText.textContent = message;
            errorMessage.style.display = 'flex';
            
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 5000);
        }

        // Fonction pour afficher le loading
        function showLoading(show) {
            const button = document.getElementById('loginButton');
            const buttonText = button.querySelector('.button-text');
            const loading = document.getElementById('loading');
            
            if (show) {
                buttonText.style.display = 'none';
                loading.style.display = 'flex';
                button.disabled = true;
            } else {
                buttonText.style.display = 'block';
                loading.style.display = 'none';
                button.disabled = false;
            }
        }

        // Gestion de la connexion
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // Validation basique
            if (!email || !password) {
                showError('Veuillez remplir tous les champs');
                return;
            }
            
            if (!email.includes('@')) {
                showError('Veuillez entrer une adresse email valide');
                return;
            }
            
            // Simulation de connexion
            showLoading(true);
            
            setTimeout(() => {
                // Simulation d'authentification
                if (email === 'admin@asten.com' && password === 'admin123') {
                    // Stockage des données utilisateur
                    const userData = {
                        email: email,
                        name: 'Administrateur',
                        role: 'admin',
                        loginTime: new Date().toISOString()
                    };
                    
                    // Stockage en mémoire (simulation)
                    window.currentUser = userData;
                    
                    // Redirection vers le dashboard
                    window.location.href = 'acc.html';
                } else {
                    showLoading(false);
                    showError('Email ou mot de passe incorrect');
                }
            }, 2000);
        });

        // Accès démonstration
        document.getElementById('demoButton').addEventListener('click', function() {
            // Données utilisateur démo
            const demoUser = {
                email: 'demo@asten.com',
                name: 'Utilisateur Démo',
                role: 'user',
                loginTime: new Date().toISOString()
            };
            
            window.currentUser = demoUser;
            window.location.href = 'dashboard.html';
        });

        // Animation d'entrée pour les éléments
        window.addEventListener('load', function() {
            const elements = document.querySelectorAll('.form-group, .login-button, .demo-access');
            elements.forEach((el, index) => {
                el.style.opacity = '0';
                el.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    el.style.transition = 'all 0.6s ease';
                    el.style.opacity = '1';
                    el.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });

        // Préremplir les champs pour la démo
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('demo') === 'true') {
                document.getElementById('email').value = 'admin@asten.com';
                document.getElementById('password').value = 'admin123';
            }
        });
    </script>
</body>
</html>